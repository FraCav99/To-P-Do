(()=>{"use strict";!function(t,e){const i={darkModeSwitch:document.querySelector('input[type="checkbox"]'),modalContainer:document.querySelector(".modal-container"),listTitleModal:document.querySelector(".title-input"),listsContainer:document.querySelector(".lists-container"),addNewListBtn:document.getElementById("add-new-list"),discardTitleBtn:document.getElementById("discard-list-title"),listTitleInput:document.getElementById("list-title-input"),addListBtn:document.getElementById("add-list-title"),itemInputModal:document.querySelector(".item-input"),addNewItemBtn:document.getElementById("add-new-todo"),addItemBtn:document.getElementById("add-item"),discardItemBtn:document.getElementById("discard-item"),editItemModal:document.querySelector(".edit-item-input"),editTitleInput:document.getElementById("item-edit-title"),editDateInput:document.getElementById("item-edit-duedate"),editPriorityInput:document.getElementById("item-edit-priority"),editDescrInput:document.getElementById("edit-description"),confirmEditBtn:document.getElementById("edit-item"),discardEditBtn:document.getElementById("discard-edit-item"),cancelListModal:document.querySelector(".deletion-modal"),closeCancelListModalBtn:document.getElementById("cancel"),confirmCancelationListBtn:document.getElementById("delete"),listItemsContainer:document.querySelector(".list-items-container"),listTitle:document.getElementById("list-title"),itemTitle:document.getElementById("item-title"),itemDate:document.getElementById("item-duedate"),itemPriority:document.getElementById("item-priority"),itemDescription:document.getElementById("description")};let n,d,l,o;i.darkModeSwitch.addEventListener("click",(()=>t.toggleDarkMode(i.darkModeSwitch))),i.addNewListBtn.addEventListener("click",(()=>t.showModal(i.modalContainer,i.listTitleModal))),i.addNewItemBtn.addEventListener("click",(()=>t.showModal(i.modalContainer,i.itemInputModal))),i.listsContainer.addEventListener("click",(e=>{e.target.classList.contains("list")&&(n=e.target.textContent,n=n.slice(0,-1),t.showTodos(n,i.listItemsContainer,i.listTitle),i.addNewItemBtn.classList.remove("visible")),e.target.classList.contains("delete-list")&&(n=e.target.parentNode.textContent,n=n.slice(0,-1),t.showModal(i.modalContainer,i.cancelListModal))})),i.discardTitleBtn.addEventListener("click",(e=>{t.resetInputField(i.listTitleInput),t.closeModal(e,i.modalContainer,i.listTitleModal)})),i.discardItemBtn.addEventListener("click",(e=>{t.resetInputField(i.itemTitle),t.resetInputField(i.itemDate),t.resetInputField(i.itemDescription),t.closeModal(e,i.modalContainer,i.itemInputModal)})),i.closeCancelListModalBtn.addEventListener("click",(e=>t.closeModal(e,i.modalContainer,i.cancelListModal))),i.addListBtn.addEventListener("click",(n=>{""!==i.listTitleInput.value&&(e.createList(i.listTitleInput.value),t.createListDiv(i.listsContainer),t.resetInputField(i.listTitleInput),t.closeModal(n,i.modalContainer,i.listTitleModal))})),i.confirmCancelationListBtn.addEventListener("click",(d=>{""!==n&&(e.deleteList(n),t.createListDiv(i.listsContainer),t.closeModal(d,i.modalContainer,i.cancelListModal)),t.clearListContainer(i.listItemsContainer),i.addNewItemBtn.classList.add("visible"),n="",i.listTitle.textContent="Select a list or create a new one."})),i.addItemBtn.addEventListener("click",(d=>{n&&0!==localStorage.length?""!==i.itemTitle.value&&""!==i.itemDate.value&&(e.addTodo(n,i.itemTitle.value,i.itemDate.value,i.itemPriority.value,i.itemDescription.value),t.resetInputField(i.itemTitle),t.resetInputField(i.itemDate),t.resetInputField(i.itemDescription),t.closeModal(d,i.modalContainer,i.itemInputModal),t.showTodos(n,i.listItemsContainer,i.listTitle)):(t.resetInputField(i.itemTitle),t.resetInputField(i.itemDate),t.resetInputField(i.itemDescription),t.closeModal(d,i.modalContainer,i.itemInputModal))})),i.discardEditBtn.addEventListener("click",(e=>{t.closeModal(e,i.modalContainer,i.editItemModal)})),i.confirmEditBtn.addEventListener("click",(d=>{e.editTodo(n,o,i.editTitleInput.value,i.editDateInput.value,i.editPriorityInput.value,i.editDescrInput.value),t.closeModal(d,i.modalContainer,i.editItemModal),t.showTodos(n,i.listItemsContainer,i.listTitle)})),i.listItemsContainer.addEventListener("click",(e=>{if("action"===e.target.className){d=document.querySelectorAll(".item"),l=e.target.parentNode.parentNode;for(let t=0;t<d.length;t++)if(d[t]===l){o=t;break}switch(e.target.getAttribute("id")){case"modify":t.showEditModal(i.modalContainer,i.editItemModal,o,n,i.editTitleInput,i.editDateInput,i.editPriorityInput,i.editDescrInput);break;case"checked":console.log("checked");break;case"info":console.log("info");break;case"delete":console.log("delete")}}})),t.createListDiv(i.listsContainer)}(function(){const t=(t,e)=>{t.classList.remove("visible"),e.classList.remove("visible")},e=t=>{for(;t.firstChild&&"add-new-todo"!==t.lastChild.id;)t.removeChild(t.lastChild)},i=(t,e)=>{const i=document.createElement("button");i.setAttribute("class","action"),i.setAttribute("id",t);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 24 24");const d=document.createElementNS("http://www.w3.org/2000/svg","path");return d.setAttribute("d",e),n.append(d),i.append(n),i},n=(t,e)=>{const n=document.createElement("div");n.classList.add("item");const d=document.createElement("span");switch(d.classList.add("priority"),t.priority){case"high":d.classList.add("high");break;case"medium":d.classList.add("medium");break;case"low":d.classList.add("low")}const l=document.createElement("span");l.setAttribute("id","item-name"),l.textContent=t.title;const o=document.createElement("div");o.setAttribute("class","actionBtn");const a=i("modify","M7.127 22.564l-7.126 1.436 1.438-7.125 5.688 5.689zm-4.274-7.104l5.688 5.689 15.46-15.46-5.689-5.689-15.459 15.46z"),s=i("checked","M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"),c=i("info","M12 24c6.627 0 12-5.373 12-12s-5.373-12-12-12-12 5.373-12 12 5.373 12 12 12zm1-6h-2v-8h2v8zm-1-12.25c.69 0 1.25.56 1.25 1.25s-.56 1.25-1.25 1.25-1.25-.56-1.25-1.25.56-1.25 1.25-1.25z"),r=document.createElement("button");r.setAttribute("class","action"),r.setAttribute("id","delete"),r.textContent="X",o.append(a),o.append(s),o.append(c),o.append(r),n.append(d),n.append(l),n.append(o),e.append(n)};return{toggleDarkMode:t=>{const e=document.getElementById("dark");t.checked?e.rel="stylesheet":e.rel="stylesheet alternate"},resetInputField:t=>t.value="",showModal:t,closeModal:(t,e,i)=>{e.classList.add("visible"),i.classList.add("visible"),t.preventDefault()},createListDiv:t=>{if((t=>{for(;t.firstChild;)t.removeChild(t.lastChild)})(t),localStorage.length>0)for(let e=0;e<localStorage.length;e++){const i=document.createElement("li");i.classList.add("list"),i.textContent=localStorage.key(e);const n=document.createElement("button");n.classList.add("delete-list"),n.textContent="X",i.append(n),t.append(i)}else{const e=document.createElement("p");e.textContent="Start by creating a new list",t.append(e)}},showTodos:(t,i,d)=>{if(JSON.parse(localStorage.getItem(t)).length>0){let l=JSON.parse(localStorage.getItem(t));d.textContent=t,e(i);for(let t of l)n(t,i)}else{e(i);const n=document.createElement("p");n.style.textAlign="center",n.textContent="Add new todo(s) from the button below",i.append(n),d.textContent=t}},clearListContainer:e,showEditModal:(e,i,n,d,l,o,a,s)=>{const c=JSON.parse(localStorage.getItem(d)).find((t=>t.id===n));t(e,i),l.value=c.title,o.value=c.date,a.value=c.priority,s.value=c.description}}}(),{createList:t=>{localStorage.setItem(t,JSON.stringify([]))},deleteList:t=>{localStorage.removeItem(t)},addTodo:(t,e,i,n,d)=>{const l=JSON.parse(localStorage.getItem(t)),o={id:l.length,title:e,date:i,priority:n,description:d,complete:!1};l.push(o),localStorage.setItem(t,JSON.stringify(l))},editTodo:(t,e,i,n,d,l)=>{const o=JSON.parse(localStorage.getItem(t)),a=o.find((t=>t.id===e));a.id=e,a.title=i,a.date=n,a.priority=d,a.description=l;const s={id:a.id,title:a.title,date:a.date,priority:a.priority,description:a.description,complete:a.complete};o[e]=s,localStorage.setItem(t,JSON.stringify(o))}})})();